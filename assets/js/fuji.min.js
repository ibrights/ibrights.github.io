(()=>{"use strict";function g(){let a=document.body.getAttribute("data-theme");return a==="auto"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":a==="dark"?"dark":"light"}document.querySelector("span.post-comment-notloaded")&&document.querySelector("span.post-comment-notloaded").addEventListener("click",loadComment);document.querySelector(".btn .btn-scroll-top").addEventListener("click",()=>{document.documentElement.scrollTop=0});document.addEventListener("DOMContentLoaded",()=>{typeof mediumZoom==="function"&&mediumZoom(".img-zoomable",{margin:32,background:"#00000054",scrollOffset:128})});function j(a){let b=g();a&&(b==="dark"?a.contentWindow.postMessage({type:"set-theme",theme:"photon-dark"},"https://utteranc.es"):a.contentWindow.postMessage({type:"set-theme",theme:"github-light"},"https://utteranc.es"))}document.querySelector(".btn .btn-toggle-mode").addEventListener("click",()=>{let a=g(),b=document.body.getAttribute("data-theme");const d=document.body.getAttribute("data-theme-auto")==="true";let c=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";if(b==="auto")document.body.setAttribute("data-theme",a==="light"?"dark":"light"),localStorage.setItem("fuji_data-theme",a==="light"?"dark":"light");else if(b==="light"){const f=c==="dark"?d?"auto":"dark":"dark";document.body.setAttribute("data-theme",f),localStorage.setItem("fuji_data-theme",f)}else{const f=c==="light"?d?"auto":"light":"light";document.body.setAttribute("data-theme",f),localStorage.setItem("fuji_data-theme",f)}let e=document.querySelector(".post-comment");e&&(document.querySelector("span.post-comment-notloaded").getAttribute("style")&&(e.getAttribute("data-comment")==="utterances"&&j(document.querySelector(".post-comment iframe")),e.getAttribute("data-comment")==="disqus"&&DISQUS.reset({reload:!0})))});function k(a,b,d){let c=new Fuse(b,{shouldSort:!0,distance:1e4,keys:[{name:"title",weight:2},{name:"tags",weight:1.5},{name:"content",weight:1}]}),e=c.search(a);return e.length>0?(document.getElementById("search-result").innerHTML=template("search-result-template",e),[new Date().getTime()-d,e.length]):"notFound"}let h=new URLSearchParams(window.location.search);if(h.has("s")){let a=new Date().getTime(),b=document.querySelectorAll(".search-result-info"),d=h.get("s");document.querySelector(".search-input input").setAttribute("value",d);let c=new XMLHttpRequest();c.open("GET","index.json",!0),c.responseType="json",c.onerror=()=>{b[2].removeAttribute("style")},c.ontimeout=()=>{b[2].removeAttribute("style")},c.onreadystatechange=()=>{c.readyState===4&&(c.status===200?(a=k(d,c.response,a),a==="notFound"?b[1].removeAttribute("style"):(b[0].innerHTML=b[0].innerHTML.replace("[TIME]",a[0]),b[0].innerHTML=b[0].innerHTML.replace("[NUM]",a[1]),b[0].removeAttribute("style"))):b[2].removeAttribute("style"))},c.send(null)}const i=document.getElementById("btn-menu");i&&i.addEventListener("click",()=>{const a=document.querySelector(".sidebar-mobile");a&&(a.style.display==="none"?a.setAttribute("style","display: flex;"):a.setAttribute("style","display: none;"))});})();
